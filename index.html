<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Audio Transcriber (Vue.js)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.25.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0"
  }
}
</script>
  </head>
  <body class="bg-gray-900">
    <div id="app">
        <div class="min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center justify-center p-4 font-sans">
            <div class="w-full max-w-2xl bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-8 space-y-6 border border-gray-700">
                <header class="text-center">
                    <h1 class="text-3xl md:text-4xl font-bold text-cyan-400">Trình Ghi Âm AI</h1>
                    <p class="text-gray-400 mt-2">Ghi âm và chuyển đổi giọng nói thành văn bản trong thời gian thực.</p>
                </header>
                
                <div class="flex flex-col items-center justify-center space-y-4">
                    <button
                        @click="toggleRecording"
                        :class="['relative w-24 h-24 rounded-full flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-opacity-50', isRecording ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500' : 'bg-cyan-500 hover:bg-cyan-600 focus:ring-cyan-400']"
                        :aria-label="isRecording ? 'Dừng ghi âm' : 'Bắt đầu ghi âm'"
                    >
                        <template v-if="isRecording">
                            <!-- Stop Icon -->
                            <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg>
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
                        </template>
                        <template v-else>
                            <!-- Mic Icon -->
                            <svg class="w-10 h-10 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                        </template>
                    </button>
                    <p class="text-gray-400 h-6 transition-opacity duration-300">{{ status }}</p>
                </div>

                <div class="bg-gray-900 rounded-lg p-4 min-h-[200px] border border-gray-700 relative group">
                    <pre class="whitespace-pre-wrap break-words text-gray-300 font-sans h-full max-h-96 overflow-y-auto">
                        <span v-if="!transcript" class="text-gray-500">Bản ghi sẽ xuất hiện ở đây...</span>
                        <template v-else>{{ transcript }}</template>
                    </pre>
                    <div v-if="transcript" class="absolute top-2 right-2 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button @click="handleCopy" class="p-2 bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-500" title="Sao chép">
                            <span v-if="copyStatus" class="text-xs px-2 text-cyan-400">{{ copyStatus }}</span>
                            <!-- Copy Icon -->
                            <svg v-else class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        </button>
                        <button @click="handleClear" class="p-2 bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-500" title="Xóa">
                            <!-- Trash Icon -->
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
            <footer class="text-center mt-8 text-gray-500 text-sm">
                <p>Powered by Duongdd</p>
            </footer>
        </div>
    </div>
    <script type="module" src="/index.js"></script>
  </body>
</html>
